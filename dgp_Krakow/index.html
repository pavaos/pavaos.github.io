<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css"><link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css"><link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/filter.css">
<link rel="stylesheet" href="css/nouislider.min.css">
        <link rel="stylesheet" href="css/leaflet-control-geocoder.Geocoder.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script><script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-control-geocoder.Geocoder.js"></script>
        <script src="js/tailDT.js"></script>
<script src="js/nouislider.min.js"></script>
<script src="js/wNumb.js"></script>
        <script src="data/Daria_Krakow_1.js"></script>
        <script src="data/Wyniki_dzielnice_2.js"></script>
        <script src="data/Granicedzielnic_3.js"></script>
        <script>
        var map = L.map('map', {
            zoomControl:true, maxZoom:28, minZoom:1
        }).fitBounds([[49.95169143102034,19.794982263064924],[50.14921533053712,20.23337412956119]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_OpenStreetMap_0');
        map.getPane('pane_OpenStreetMap_0').style.zIndex = 400;
        var layer_OpenStreetMap_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            pane: 'pane_OpenStreetMap_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_0;
        map.addLayer(layer_OpenStreetMap_0);
        function pop_Daria_Krakow_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Dzielnica</th>\
                        <td>' + (feature.properties['Dzielnica'] !== null ? autolinker.link(feature.properties['Dzielnica'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Obwód</th>\
                        <td>' + (feature.properties['obwod'] !== null ? autolinker.link(feature.properties['obwod'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Siedziba komisji</th>\
                        <td>' + (feature.properties['Krakow_sie'] !== null ? autolinker.link(feature.properties['Krakow_sie'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Dostępność dla OzN</th>\
                        <td>' + (feature.properties['OzN'] !== null ? autolinker.link(feature.properties['OzN'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Proc. gł. na Darię</th>\
                        <td>' + (feature.properties['proc_dar'] !== null ? autolinker.link(feature.properties['proc_dar'].toLocaleString()) : '') + '%</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">L. gł. na Darię</th>\
                        <td>' + (feature.properties['gl_dar'] !== null ? autolinker.link(feature.properties['gl_dar'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Wszystkie gł. ważne</th>\
                        <td>' + (feature.properties['Krakow_glo'] !== null ? autolinker.link(feature.properties['Krakow_glo'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Wielkość obw. (l. ludzi)</th>\
                        <td>' + (feature.properties['licz_wyb'] !== null ? autolinker.link(feature.properties['licz_wyb'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Frekwencja w obw.</th>\
                        <td>' + (feature.properties['frek'] !== null ? autolinker.link(feature.properties['frek'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Daria_Krakow_1_0(feature) {
            if (feature.properties['proc_dar'] >= 0.299000 && feature.properties['proc_dar'] <= 1.143363 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(64,64,64,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 1.143363 && feature.properties['proc_dar'] <= 1.885564 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(134,134,134,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 1.885564 && feature.properties['proc_dar'] <= 2.627766 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(196,196,196,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 2.627766 && feature.properties['proc_dar'] <= 3.369968 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(235,235,235,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 3.369968 && feature.properties['proc_dar'] <= 4.112170 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(252,229,219,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 4.112170 && feature.properties['proc_dar'] <= 4.854371 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(246,178,148,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 4.854371 && feature.properties['proc_dar'] <= 5.596573 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(226,94,88,0.65)',
                interactive: true,
            }
            }
            if (feature.properties['proc_dar'] >= 5.596573 && feature.properties['proc_dar'] <= 8.923000 ) {
                return {
                pane: 'pane_Daria_Krakow_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.65)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(202,0,32,0.65)',
                interactive: true,
            }
            }
        }
        map.createPane('pane_Daria_Krakow_1');
        map.getPane('pane_Daria_Krakow_1').style.zIndex = 401;
        map.getPane('pane_Daria_Krakow_1').style['mix-blend-mode'] = 'normal';
        var layer_Daria_Krakow_1 = new L.geoJson(json_Daria_Krakow_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Daria_Krakow_1',
            layerName: 'layer_Daria_Krakow_1',
            pane: 'pane_Daria_Krakow_1',
            onEachFeature: pop_Daria_Krakow_1,
            style: style_Daria_Krakow_1_0,
        });
        bounds_group.addLayer(layer_Daria_Krakow_1);
        map.addLayer(layer_Daria_Krakow_1);
        function pop_Wyniki_dzielnice_2(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">nazwa:</th>\
                        <td>' + (feature.properties['official_name'] !== null ? autolinker.link(feature.properties['official_name'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Gł. na Darię</th>\
                        <td>' + (feature.properties['gl_daria'] !== null ? autolinker.link(feature.properties['gl_daria'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Proc. gł. na Darię</th>\
                        <td>' + (feature.properties['proc_daria'] !== null ? autolinker.link(feature.properties['proc_daria'].toLocaleString()) : '') + '%</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Wszystkie gł. ważne</th>\
                        <td>' + (feature.properties['gl_wazne'] !== null ? autolinker.link(feature.properties['gl_wazne'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">L. uprawnionych</th>\
                        <td>' + (feature.properties['l_wyb'] !== null ? autolinker.link(feature.properties['l_wyb'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Frekwencja</th>\
                        <td>' + (feature.properties['frekwencja'] !== null ? autolinker.link(feature.properties['frekwencja'].toLocaleString()) : '') + '%</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Wyniki_dzielnice_2_0(feature) {
            if (feature.properties['proc_daria'] >= 1.860000 && feature.properties['proc_daria'] <= 2.000000 ) {
                return {
                pane: 'pane_Wyniki_dzielnice_2',
                opacity: 1,
                color: 'rgba(35,35,35,0.7)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,255,0.7)',
                interactive: true,
            }
            }
            if (feature.properties['proc_daria'] >= 2.000000 && feature.properties['proc_daria'] <= 3.000000 ) {
                return {
                pane: 'pane_Wyniki_dzielnice_2',
                opacity: 1,
                color: 'rgba(35,35,35,0.7)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,191,191,0.7)',
                interactive: true,
            }
            }
            if (feature.properties['proc_daria'] >= 3.000000 && feature.properties['proc_daria'] <= 4.000000 ) {
                return {
                pane: 'pane_Wyniki_dzielnice_2',
                opacity: 1,
                color: 'rgba(35,35,35,0.7)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,128,128,0.7)',
                interactive: true,
            }
            }
            if (feature.properties['proc_daria'] >= 4.000000 && feature.properties['proc_daria'] <= 5.000000 ) {
                return {
                pane: 'pane_Wyniki_dzielnice_2',
                opacity: 1,
                color: 'rgba(35,35,35,0.7)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,64,64,0.7)',
                interactive: true,
            }
            }
            if (feature.properties['proc_daria'] >= 5.000000 && feature.properties['proc_daria'] <= 5.190000 ) {
                return {
                pane: 'pane_Wyniki_dzielnice_2',
                opacity: 1,
                color: 'rgba(35,35,35,0.7)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,0,0.7)',
                interactive: true,
            }
            }
        }
        map.createPane('pane_Wyniki_dzielnice_2');
        map.getPane('pane_Wyniki_dzielnice_2').style.zIndex = 402;
        map.getPane('pane_Wyniki_dzielnice_2').style['mix-blend-mode'] = 'normal';
        var layer_Wyniki_dzielnice_2 = new L.geoJson(json_Wyniki_dzielnice_2, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Wyniki_dzielnice_2',
            layerName: 'layer_Wyniki_dzielnice_2',
            pane: 'pane_Wyniki_dzielnice_2',
            onEachFeature: pop_Wyniki_dzielnice_2,
            style: style_Wyniki_dzielnice_2_0,
        });
        bounds_group.addLayer(layer_Wyniki_dzielnice_2);
        function pop_Granicedzielnic_3(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['fid'] !== null ? autolinker.link(feature.properties['fid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['official_name'] !== null ? autolinker.link(feature.properties['official_name'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_Granicedzielnic_3_0() {
            return {
                pane: 'pane_Granicedzielnic_3',
                opacity: 1,
                color: 'rgba(225,255,1,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 2.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,255,0.0)',
                interactive: false,
            }
        }
        map.createPane('pane_Granicedzielnic_3');
        map.getPane('pane_Granicedzielnic_3').style.zIndex = 403;
        map.getPane('pane_Granicedzielnic_3').style['mix-blend-mode'] = 'normal';
        var layer_Granicedzielnic_3 = new L.geoJson(json_Granicedzielnic_3, {
            attribution: '',
            interactive: false,
            dataVar: 'json_Granicedzielnic_3',
            layerName: 'layer_Granicedzielnic_3',
            pane: 'pane_Granicedzielnic_3',
            onEachFeature: pop_Granicedzielnic_3,
            style: style_Granicedzielnic_3_0,
        });
        bounds_group.addLayer(layer_Granicedzielnic_3);
        var osmGeocoder = new L.Control.Geocoder({
            collapsed: true,
            position: 'topleft',
            text: 'Search',
            title: 'Testing'
        }).addTo(map);
        document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
        .className += ' fa fa-search';
        document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
        .title += 'Search for a place';
        var baseMaps = {};
        L.control.layers(baseMaps,{'<img src="legend/Granicedzielnic_3.png" /> Granice dzielnic': layer_Granicedzielnic_3,'<b>Wyniki w dzielnicach</b><br /><table><tr><td style="text-align: center;"><img src="legend/Wyniki_dzielnice_2_18620.png" /></td><td>1,86 - 2%</td></tr><tr><td style="text-align: center;"><img src="legend/Wyniki_dzielnice_2_231.png" /></td><td>2 - 3%</td></tr><tr><td style="text-align: center;"><img src="legend/Wyniki_dzielnice_2_342.png" /></td><td>3 - 4%</td></tr><tr><td style="text-align: center;"><img src="legend/Wyniki_dzielnice_2_453.png" /></td><td>4 - 5%</td></tr><tr><td style="text-align: center;"><img src="legend/Wyniki_dzielnice_2_55194.png" /></td><td>5 - 5,19%</td></tr></table>': layer_Wyniki_dzielnice_2,'<b>Wyniki w obwodach</b><br /><table><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_029114150SD0.png" /></td><td>0,29 - 1,14% (< -1,50 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_114189150100SD1.png" /></td><td>1,14 - 1,89% (-1,50 - -1,00 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_189263100050SD2.png" /></td><td>1,89 - 2,63% (-1,00 - -0,50 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_263337050000SD3.png" /></td><td>2,63 - 3,37% (-0,50 - 0,00 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_337411000050SD4.png" /></td><td>3,37 - 4,11% (0,00 - 0,50 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_411485050100SD5.png" /></td><td>4,11 - 4,85% (0,50 - 1,00 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_485560100150SD6.png" /></td><td>4,85 - 5,60% (1,00 - 1,50 SD)</td></tr><tr><td style="text-align: center;"><img src="legend/Daria_Krakow_1_560892150SD7.png" /></td><td>5,60 - 8,92% (≥  1,50 SD)</td></tr></table>': layer_Daria_Krakow_1,"OpenStreetMap": layer_OpenStreetMap_0,},{collapsed:false}).addTo(map);
        map.on("zoomend", function(){

                if (map.hasLayer(layer_Daria_Krakow_1)) {
                    if (map.getZoom() <= 14 && map.getZoom() >= 19) {
                        layer_Daria_Krakow_1.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Daria_Krakow_1.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
                if (map.hasLayer(layer_Wyniki_dzielnice_2)) {
                    if (map.getZoom() <= 13 && map.getZoom() >= 19) {
                        layer_Wyniki_dzielnice_2.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Wyniki_dzielnice_2.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
                if (map.hasLayer(layer_Granicedzielnic_3)) {
                    if (map.getZoom() <= 13 && map.getZoom() >= 19) {
                        layer_Granicedzielnic_3.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Granicedzielnic_3.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
        });
        setBounds();
                if (map.hasLayer(layer_Daria_Krakow_1)) {
                    if (map.getZoom() <= 14 && map.getZoom() >= 19) {
                        layer_Daria_Krakow_1.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Daria_Krakow_1.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
                if (map.hasLayer(layer_Wyniki_dzielnice_2)) {
                    if (map.getZoom() <= 13 && map.getZoom() >= 19) {
                        layer_Wyniki_dzielnice_2.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Wyniki_dzielnice_2.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
                if (map.hasLayer(layer_Granicedzielnic_3)) {
                    if (map.getZoom() <= 13 && map.getZoom() >= 19) {
                        layer_Granicedzielnic_3.eachLayer(function (layer) {
                            layer.openTooltip();
                        });
                    } else {
                        layer_Granicedzielnic_3.eachLayer(function (layer) {
                            layer.closeTooltip();
                        });
                    }
                }
        var mapDiv = document.getElementById('map');
        var row = document.createElement('div');
        row.className="row";
        row.id="all";
        row.style.height = "100%";
        var col1 = document.createElement('div');
        col1.className="col9";
        col1.id = "mapWindow";
        col1.style.height = "99%";
        col1.style.width = "80%";
        col1.style.display = "inline-block";
        var col2 = document.createElement('div');
        col2.className="col3";
        col2.id = "menu";
        col2.style.display = "inline-block";
        mapDiv.parentNode.insertBefore(row, mapDiv);
        document.getElementById("all").appendChild(col1);
        document.getElementById("all").appendChild(col2);
        col1.appendChild(mapDiv)
        var Filters = {"gl_dar": "int","licz_wyb": "int","proc_dar": "real","frek": "real","Dzielnica": "str","OzN": "str"};
        function filterFunc() {
          map.eachLayer(function(lyr){
          if ("options" in lyr && "dataVar" in lyr["options"]){
            features = this[lyr["options"]["dataVar"]].features.slice(0);
            try{
              for (key in Filters){
                keyS = key.replace(/[^a-zA-Z0-9_]/g, "")
                if (Filters[key] == "str" || Filters[key] == "bool"){
                  var selection = [];
                  var options = document.getElementById("sel_" + keyS).options
                  for (var i=0; i < options.length; i++) {
                    if (options[i].selected) selection.push(options[i].value);
                  }
                    try{
                      if (key in features[0].properties){
                        for (i = features.length - 1;
                          i >= 0; --i){
                          if (selection.indexOf(
                          features[i].properties[key])<0
                          && selection.length>0) {
                          features.splice(i,1);
                          }
                        }
                      }
                    } catch(err){
                  }
                }
                if (Filters[key] == "int"){
                  sliderVals =  document.getElementById(
                    "div_" + keyS).noUiSlider.get();
                  try{
                    if (key in features[0].properties){
                    for (i = features.length - 1; i >= 0; --i){
                      if (parseInt(features[i].properties[key])
                          < sliderVals[0]
                          || parseInt(features[i].properties[key])
                          > sliderVals[1]){
                            features.splice(i,1);
                          }
                        }
                      }
                    } catch(err){
                    }
                  }
                if (Filters[key] == "real"){
                  sliderVals =  document.getElementById(
                    "div_" + keyS).noUiSlider.get();
                  try{
                    if (key in features[0].properties){
                    for (i = features.length - 1; i >= 0; --i){
                      if (features[i].properties[key]
                          < sliderVals[0]
                          || features[i].properties[key]
                          > sliderVals[1]){
                            features.splice(i,1);
                          }
                        }
                      }
                    } catch(err){
                    }
                  }
                if (Filters[key] == "date"
                  || Filters[key] == "datetime"
                  || Filters[key] == "time"){
                  try{
                    if (key in features[0].properties){
                      HTMLkey = key.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g, '');
                      startdate = document.getElementById("dat_" +
                        HTMLkey + "_date1").value.replace(" ", "T");
                      enddate = document.getElementById("dat_" +
                        HTMLkey + "_date2").value.replace(" ", "T");
                      for (i = features.length - 1; i >= 0; --i){
                        if (features[i].properties[key] < startdate
                          || features[i].properties[key] > enddate){
                          features.splice(i,1);
                        }
                      }
                    }
                  } catch(err){
                  }
                }
              }
            } catch(err){
            }
          this[lyr["options"]["layerName"]].clearLayers();
          this[lyr["options"]["layerName"]].addData(features);
          }
          })
        }
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_gl_dar = document.createElement("div");
            div_gl_dar.id = "div_gl_dar";
            div_gl_dar.className = "slider";
            document.getElementById("menu").appendChild(div_gl_dar);
            var lab_gl_dar = document.createElement('div');
            lab_gl_dar.innerHTML  = 'Liczba gł. na Darię: <span id="val_gl_dar"></span>';
            lab_gl_dar.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_gl_dar);
            var reset_gl_dar = document.createElement('div');
            reset_gl_dar.innerHTML = 'clear filter';
            reset_gl_dar.className = 'filterlabel';
            lab_gl_dar.className = 'filterlabel';
            reset_gl_dar.onclick = function() {
                sel_gl_dar.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_gl_dar);
            var sel_gl_dar = document.getElementById('div_gl_dar');
            noUiSlider.create(sel_gl_dar, {
                connect: true,
                start: [1, 113],
                step: 1,
                format: wNumb({
                    decimals: 0,
                    }),
                range: {
                min: 1,
                max: 113
                }
            });
            sel_gl_dar.noUiSlider.on('update', function (values) {
            filterVals =[];
            for (value in values){
            filterVals.push(parseInt(value))
            }
            val_gl_dar = document.getElementById('val_gl_dar');
            val_gl_dar.innerHTML = values.join(' - ');
                filterFunc()
            });
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_proc_dar = document.createElement("div");
            div_proc_dar.id = "div_proc_dar";
            div_proc_dar.className = "slider";
            document.getElementById("menu").appendChild(div_proc_dar);
            var lab_proc_dar = document.createElement('div');
            lab_proc_dar.innerHTML  = 'Procent gł. na Darię: <span id="val_proc_dar"></span>%';
            lab_proc_dar.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_proc_dar);
            var reset_proc_dar = document.createElement('div');
            reset_proc_dar.innerHTML = 'clear filter';
            reset_proc_dar.className = 'filterlabel';
            lab_proc_dar.className = 'filterlabel';
            reset_proc_dar.onclick = function() {
                sel_proc_dar.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_proc_dar);
            var sel_proc_dar = document.getElementById('div_proc_dar');
            noUiSlider.create(sel_proc_dar, {
                connect: true,
                start: [0.3, 8.92],
                range: {
                min: 0.3,
                max: 8.92
                }
            });
            sel_proc_dar.noUiSlider.on('update', function (values) {
            val_proc_dar = document.getElementById('val_proc_dar');
            val_proc_dar.innerHTML = values.join(' - ');
                filterFunc()
            });
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_licz_wyb = document.createElement("div");
            div_licz_wyb.id = "div_licz_wyb";
            div_licz_wyb.className = "slider";
            document.getElementById("menu").appendChild(div_licz_wyb);
            var lab_licz_wyb = document.createElement('div');
            lab_licz_wyb.innerHTML  = 'Wielkość obwodu (l. upr.): <span id="val_licz_wyb"></span>';
            lab_licz_wyb.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_licz_wyb);
            var reset_licz_wyb = document.createElement('div');
            reset_licz_wyb.innerHTML = 'clear filter';
            reset_licz_wyb.className = 'filterlabel';
            lab_licz_wyb.className = 'filterlabel';
            reset_licz_wyb.onclick = function() {
                sel_licz_wyb.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_licz_wyb);
            var sel_licz_wyb = document.getElementById('div_licz_wyb');
            noUiSlider.create(sel_licz_wyb, {
                connect: true,
                start: [282, 2566],
                step: 1,
                format: wNumb({
                    decimals: 0,
                    }),
                range: {
                min: 282,
                max: 2566
                }
            });
            sel_licz_wyb.noUiSlider.on('update', function (values) {
            filterVals =[];
            for (value in values){
            filterVals.push(parseInt(value))
            }
            val_licz_wyb = document.getElementById('val_licz_wyb');
            val_licz_wyb.innerHTML = values.join(' - ');
                filterFunc()
            });
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_frek = document.createElement("div");
            div_frek.id = "div_frek";
            div_frek.className = "slider";
            document.getElementById("menu").appendChild(div_frek);
            var lab_frek = document.createElement('div');
            lab_frek.innerHTML  = 'Frekwencja: <span id="val_frek"></span>';
            lab_frek.className = 'filterlabel';
            document.getElementById("menu").appendChild(lab_frek);
            var reset_frek = document.createElement('div');
            reset_frek.innerHTML = 'clear filter';
            reset_frek.className = 'filterlabel';
            lab_frek.className = 'filterlabel';
            reset_frek.onclick = function() {
                sel_frek.noUiSlider.reset();
            };
            document.getElementById("menu").appendChild(reset_frek);
            var sel_frek = document.getElementById('div_frek');
            noUiSlider.create(sel_frek, {
                connect: true,
                start: [54.59, 94.11],
                range: {
                min: 54.59,
                max: 94.11
                }
            });
            sel_frek.noUiSlider.on('update', function (values) {
            val_frek = document.getElementById('val_frek');
            val_frek.innerHTML = values.join(' - ');
                filterFunc()
            });
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_Dzielnica = document.createElement('div');
            div_Dzielnica.id = "div_Dzielnica";
            div_Dzielnica.className= "filterselect";
            document.getElementById("menu").appendChild(div_Dzielnica);
            sel_Dzielnica = document.createElement('select');
            sel_Dzielnica.multiple = true;
            sel_Dzielnica.size = 10;
            sel_Dzielnica.id = "sel_Dzielnica";
            var Dzielnica_options_str = "<option value='' unselected></option>";
            sel_Dzielnica.onchange = function(){filterFunc()};
            Dzielnica_options_str  += '<option value="Dzielnica I">Dzielnica I</option>';
            Dzielnica_options_str  += '<option value="Dzielnica II">Dzielnica II</option>';
            Dzielnica_options_str  += '<option value="Dzielnica III">Dzielnica III</option>';
            Dzielnica_options_str  += '<option value="Dzielnica IV">Dzielnica IV</option>';
            Dzielnica_options_str  += '<option value="Dzielnica IX">Dzielnica IX</option>';
            Dzielnica_options_str  += '<option value="Dzielnica V">Dzielnica V</option>';
            Dzielnica_options_str  += '<option value="Dzielnica VI">Dzielnica VI</option>';
            Dzielnica_options_str  += '<option value="Dzielnica VII">Dzielnica VII</option>';
            Dzielnica_options_str  += '<option value="Dzielnica VIII">Dzielnica VIII</option>';
            Dzielnica_options_str  += '<option value="Dzielnica X">Dzielnica X</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XI">Dzielnica XI</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XII">Dzielnica XII</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XIII">Dzielnica XIII</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XIV">Dzielnica XIV</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XV">Dzielnica XV</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XVI">Dzielnica XVI</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XVII">Dzielnica XVII</option>';
            Dzielnica_options_str  += '<option value="Dzielnica XVIII">Dzielnica XVIII</option>';
            sel_Dzielnica.innerHTML = Dzielnica_options_str;
            div_Dzielnica.appendChild(sel_Dzielnica);
            var lab_Dzielnica = document.createElement('div');
            lab_Dzielnica.innerHTML = 'Dzielnica';
            lab_Dzielnica.className = 'filterlabel';
            div_Dzielnica.appendChild(lab_Dzielnica);
            var reset_Dzielnica = document.createElement('div');
            reset_Dzielnica.innerHTML = 'clear filter';
            reset_Dzielnica.className = 'filterlabel';
            reset_Dzielnica.onclick = function() {
                var options = document.getElementById("sel_Dzielnica").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_Dzielnica.appendChild(reset_Dzielnica);
            document.getElementById("menu").appendChild(
                document.createElement("div"));
            var div_OzN = document.createElement('div');
            div_OzN.id = "div_OzN";
            div_OzN.className= "filterselect";
            document.getElementById("menu").appendChild(div_OzN);
            sel_OzN = document.createElement('select');
            sel_OzN.multiple = true;
            sel_OzN.size = 2;
            sel_OzN.id = "sel_OzN";
            var OzN_options_str = "<option value='' unselected></option>";
            sel_OzN.onchange = function(){filterFunc()};
            OzN_options_str  += '<option value="nie">nie</option>';
            OzN_options_str  += '<option value="tak">tak</option>';
            sel_OzN.innerHTML = OzN_options_str;
            div_OzN.appendChild(sel_OzN);
            var lab_OzN = document.createElement('div');
            lab_OzN.innerHTML = 'Dostępność lokalu wyb. dla OzN';
            lab_OzN.className = 'filterlabel';
            div_OzN.appendChild(lab_OzN);
            var reset_OzN = document.createElement('div');
            reset_OzN.innerHTML = 'clear filter';
            reset_OzN.className = 'filterlabel';
            reset_OzN.onclick = function() {
                var options = document.getElementById("sel_OzN").options;
                for (var i=0; i < options.length; i++) {
                    options[i].selected = false;
                }
                filterFunc();
            };
            div_OzN.appendChild(reset_OzN);
        resetLabels([layer_Daria_Krakow_1,layer_Granicedzielnic_3]);
        map.on("zoomend", function(){
            resetLabels([layer_Daria_Krakow_1,layer_Granicedzielnic_3]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_Daria_Krakow_1,layer_Granicedzielnic_3]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_Daria_Krakow_1,layer_Granicedzielnic_3]);
        });
        </script>
    </body>
</html>
